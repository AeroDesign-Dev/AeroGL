<Window x:Class="AeroGL.JournalWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Entry Jurnal Harian" Height="640" Width="940"
        Background="#15152A" FontFamily="Consolas" FontSize="14"
        WindowStartupLocation="CenterOwner"
        KeyDown="Window_KeyDown">

    <Grid Margin="12">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- Judul -->
            <RowDefinition Height="Auto"/>
            <!-- Header -->
            <RowDefinition Height="*"/>
            <!-- GridLines -->
            <RowDefinition Height="Auto"/>
            <!-- Footer -->
        </Grid.RowDefinitions>

        <!-- Judul -->
        <TextBlock Grid.Row="0" Text="Entry Jurnal Transaksi" Foreground="#9EEAF9"
                   FontSize="18" FontWeight="Bold" Margin="0,0,0,8"/>

        <!-- Header form -->
        <!-- Header form -->
        <Grid Grid.Row="1" Margin="0,0,0,10">
            <!-- Kolom patok (pastikan kolom 1 = posisi TxtNo1) -->
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <!-- 0: label kiri -->
                <ColumnDefinition Width="90"/>
                <!-- 1: TxtNo1 (PATOK) -->
                <ColumnDefinition Width="12"/>
                <!-- 2: '/' -->
                <ColumnDefinition Width="70"/>
                <!-- 3: TxtNo2 -->
                <ColumnDefinition Width="12"/>
                <!-- 4: '/' -->
                <ColumnDefinition Width="90"/>
                <!-- 5: TxtNo3 -->
                <ColumnDefinition Width="20"/>
                <!-- 6: spasi -->
                <ColumnDefinition Width="Auto"/>
                <!-- 7: label Jenis -->
                <ColumnDefinition Width="100"/>
                <!-- 8: CmbType -->
                <ColumnDefinition Width="20"/>
                <!-- 9: spasi -->
                <ColumnDefinition Width="Auto"/>
                <!-- 10: label Tanggal -->
                <ColumnDefinition Width="120"/>
                <!-- 11: DatePicker -->
                <ColumnDefinition Width="*"/>
                <!-- 12: filler -->
                <ColumnDefinition Width="Auto"/>
                <!-- 13: Confirm -->
                <ColumnDefinition Width="8"/>
                <!-- 14: gap -->
                <ColumnDefinition Width="Auto"/>
                <!-- 15: Save -->
            </Grid.ColumnDefinitions>

            <!-- Baris: header, spacer, total debet, total kredit -->
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <!-- 0: NoTran + Jenis + Tanggal + tombol -->
                <RowDefinition Height="8"/>
                <!-- 1: spacer, biar gak nempel -->
                <RowDefinition Height="Auto"/>
                <!-- 2: Total Debet -->
                <RowDefinition Height="Auto"/>
                <!-- 3: Total Kredit -->
            </Grid.RowDefinitions>

            <!-- Row 0: NoTrans + Jenis + Tanggal + Buttons -->
            <TextBlock Grid.Row="0" Grid.Column="0" Text="No. Transaksi" Foreground="#9EEAF9"
               Margin="0,0,8,0" VerticalAlignment="Center"/>
            <TextBox   Grid.Row="0" Grid.Column="1" x:Name="TxtNo1" Width="90"  IsReadOnly="True" Margin="0,0,0,0"/>
            <TextBlock Grid.Row="0" Grid.Column="2" Text="| " Foreground="#EAEAEA" VerticalAlignment="Center"/>
            <TextBox   Grid.Row="0" Grid.Column="3" x:Name="TxtNo2" Width="70"  IsReadOnly="True"/>
            <TextBlock Grid.Row="0" Grid.Column="4" Text="| " Foreground="#EAEAEA" VerticalAlignment="Center"/>
            <TextBox   Grid.Row="0" Grid.Column="5" x:Name="TxtNo3" Width="90"  IsReadOnly="True"/>

            <TextBlock Grid.Row="0" Grid.Column="7" Text="Jenis" Foreground="#9EEAF9"
               Margin="0,0,8,0" VerticalAlignment="Center"/>
            <ComboBox  Grid.Row="0" Grid.Column="8" x:Name="CmbType" Width="100" IsEnabled="False">
                <ComboBoxItem Content="J" IsSelected="True"/>
                <ComboBoxItem Content="M"/>
            </ComboBox>

            <TextBlock Grid.Row="0" Grid.Column="10" Text="Tanggal" Foreground="#9EEAF9"
               Margin="0,0,8,0" VerticalAlignment="Center"/>
            <DatePicker Grid.Row="0" Grid.Column="11" x:Name="DpTanggal" IsEnabled="False" Width="120"/>

            <!-- Row 2: Total Debet (label di kolom 0, textbox start di kolom 1 = sejajar TxtNo1) -->
            <TextBlock Grid.Row="2" Grid.Column="0" Text="Total Debet" Foreground="#9EEAF9"
               Margin="0,0,8,4" VerticalAlignment="Center"/>
            <TextBox   Grid.Row="2" Grid.Column="1" x:Name="TxtTotD" Width="140"
               IsReadOnly="True" TextAlignment="Right" Margin="0,0,0,4"/>

            <!-- Row 3: Total Kredit (juga start di kolom 1 = sejajar TxtNo1) -->
            <!-- Row 3: Total Kredit (kiri) -->
            <TextBlock Grid.Row="3" Grid.Column="0" Text="Total Kredit"
           Foreground="#9EEAF9" Margin="0,0,8,0" VerticalAlignment="Center"/>
            <TextBox   Grid.Row="3" Grid.Column="1" x:Name="TxtTotK" Width="140"
           IsReadOnly="True" TextAlignment="Right"/>

            <!-- Row 3: Buttons (kanan, span sampai ujung, align kanan) -->
            <StackPanel Grid.Row="3" Grid.Column="2" Grid.ColumnSpan="14"
            Orientation="Horizontal" HorizontalAlignment="Right"
            Margin="0,0,0,0" >
                <Button x:Name="BtnConfirmHeader" Content="Confirm Header"
            Click="BtnConfirmHeader_Click" Margin="0,0,8,0"/>
                <Button x:Name="BtnSave" Content="Save Journal"
            Click="BtnSave_Click" IsEnabled="False"/>
            </StackPanel>
        </Grid>

        <!-- Detail lines -->
        <DataGrid Grid.Row="2" x:Name="GridLines"
          AutoGenerateColumns="False" IsReadOnly="True"
          Background="Transparent"
          BorderBrush="Transparent" BorderThickness="0"
          RowBackground="Transparent"
          AlternatingRowBackground="Transparent"
          HeadersVisibility="Column"
          GridLinesVisibility="None"
          HorizontalGridLinesBrush="#5CC8FF"
          VerticalGridLinesBrush="#5CC8FF"
          Height="360"
          ScrollViewer.CanContentScroll="False"
          SelectionChanged="GridLines_SelectionChanged" VerticalAlignment="Top" Margin="0,20,0,0">

            <DataGrid.Resources>
                <!-- Pastikan bagian dalam ScrollViewer juga transparan -->
                <Style TargetType="{x:Type ScrollViewer}">
                    <Setter Property="Background" Value="Transparent"/>
                </Style>

                <!-- Header transparan + warna teks -->
                <Style TargetType="{x:Type DataGridColumnHeader}">
                    <Setter Property="Background" Value="Transparent"/>
                    <Setter Property="Foreground" Value="#6CC6FF"/>
                    <Setter Property="BorderBrush" Value="Transparent"/>
                    <Setter Property="FontWeight" Value="Bold"/>
                    <Setter Property="Padding" Value="6,4"/>
                </Style>

                <!-- Row & Cell transparan -->
                <Style TargetType="{x:Type DataGridRow}">
                    <Setter Property="Background" Value="Transparent"/>
                    <Setter Property="Foreground" Value="#9EEAF9"/>
                    <Setter Property="BorderBrush" Value="Transparent"/>
                    <Style.Triggers>
                        <Trigger Property="IsSelected" Value="True">
                            <Setter Property="Background" Value="#403355"/>
                            <Setter Property="Foreground" Value="#EAF6FF"/>
                        </Trigger>
                    </Style.Triggers>
                </Style>

                <Style TargetType="{x:Type DataGridCell}">
                    <Setter Property="Background" Value="Transparent"/>
                    <Setter Property="BorderThickness" Value="0"/>
                    <Setter Property="Padding" Value="6,2"/>
                    <Setter Property="Foreground" Value="#9EEAF9"/>
                    <Style.Triggers>
                        <Trigger Property="IsSelected" Value="True">
                            <Setter Property="Background" Value="#403355"/>
                            <Setter Property="Foreground" Value="#EAF6FF"/>
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </DataGrid.Resources>

            <DataGrid.Columns>
                <DataGridTextColumn Header="No.Rek (2-seg)" Binding="{Binding Code2}" Width="160"/>
                <DataGridTextColumn Header="Nama Akun"      Binding="{Binding AccountName}" Width="240"/>
                <DataGridTextColumn Header="Sisi"           Binding="{Binding Side}"  Width="80"/>
                <DataGridTextColumn Header="Jumlah"         Binding="{Binding Amount, StringFormat=N2}" Width="160"/>

                <!-- Keterangan: wrap -->
                <DataGridTemplateColumn Header="Keterangan" Width="*">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Narration}"
                               TextWrapping="Wrap"
                               Foreground="#9EEAF9"
                               Padding="6,2"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                    <DataGridTemplateColumn.CellEditingTemplate>
                        <DataTemplate>
                            <TextBox Text="{Binding Narration, UpdateSourceTrigger=PropertyChanged}"
                             TextWrapping="Wrap" AcceptsReturn="True"
                             VerticalScrollBarVisibility="Auto"
                             Foreground="#9EEAF9" Padding="6,2"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellEditingTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>



        <!-- Info status (mode, posisi) -->
        <TextBlock Grid.Row="3" x:Name="TxtStatus" Foreground="#9EEAF9" Margin="0,6,0,6"/>

        <!-- Bottom menu ala DOS -->
        <UniformGrid Grid.Row="4" Rows="1" Columns="7" Margin="0,6,0,0">
            <Button x:Name="BtnAdd"  Content="Add"  Click="BtnAdd_Click"/>
            <Button x:Name="BtnEdit" Content="Edit" Click="BtnEdit_Click"/>
            <Button x:Name="BtnDel"  Content="Del"  Click="BtnDel_Click"/>
            <Button x:Name="BtnFind" Content="Find" Click="BtnFind_Click"/>
            <Button x:Name="BtnPrev" Content="Prev" Click="BtnPrev_Click"/>
            <Button x:Name="BtnNext" Content="Next" Click="BtnNext_Click"/>
            <Button x:Name="BtnQuit" Content="Quit" Click="BtnQuit_Click"/>
        </UniformGrid>
    </Grid>
</Window>
